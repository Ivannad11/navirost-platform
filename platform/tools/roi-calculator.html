<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROI –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä ‚Äî –Ω–∞–≤—ã—Ä–æ—Å—Ç.</title>
    <link rel="stylesheet" href="../../assets/css/styles.css">
    <link rel="stylesheet" href="../../assets/css/sidebar.css">
    <link rel="stylesheet" href="../css/calculators.css">
</head>
<body>
    <div class="app-container">
        <nav class="sidebar">
            <a href="../../index.html" class="sidebar-logo">–Ω–∞–≤—ã—Ä–æ—Å—Ç<span>.</span></a>
            <ul class="nav-menu">
                <!-- Populated by sidebar-logic.js -->
            </ul>
            <div class="user-profile">
                <div class="avatar">–ò</div>
                <div class="user-info">
                    <div class="user-name">–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</div>
                    <div class="user-role">Free Plan</div>
                </div>
            </div>
        </nav>
        
        <main class="main-content">
            <div class="page-header">
                <h1>ROI –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h1>
                <p class="page-subtitle">–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –≤–æ–∑–≤—Ä–∞—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –∏ —Å—Ä–æ–∫ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏</p>
            </div>

            <div class="content-grid">
                <div class="card">
                    <div class="card-header">
                        <h3>–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è (‚ÇΩ)</label>
                            <input type="number" class="form-input" id="initialInvestment" placeholder="100,000" value="100000">
                            <div class="form-help">–°—É–º–º–∞, –∫–æ—Ç–æ—Ä—É—é –≤—ã –∏–Ω–≤–µ—Å—Ç–∏—Ä—É–µ—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">–ï–∂–µ–≥–æ–¥–Ω—ã–π –¥–æ—Ö–æ–¥ –æ—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ (‚ÇΩ)</label>
                            <input type="number" class="form-input" id="annualRevenue" placeholder="30,000" value="30000">
                            <div class="form-help">–°–∫–æ–ª—å–∫–æ –¥–µ–Ω–µ–≥ –ø—Ä–æ–µ–∫—Ç –ø—Ä–∏–Ω–µ—Å–µ—Ç –≤ –≥–æ–¥</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">–ï–∂–µ–≥–æ–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (‚ÇΩ)</label>
                            <input type="number" class="form-input" id="annualExpenses" placeholder="5,000" value="5000">
                            <div class="form-help">–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ, –∞—Ä–µ–Ω–¥–∞, –ø–µ—Ä—Å–æ–Ω–∞–ª –∏ –¥—Ä—É–≥–∏–µ —Ä–∞—Å—Ö–æ–¥—ã</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">–°—Ä–æ–∫ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ (–ª–µ—Ç)</label>
                            <input type="number" class="form-input" id="investmentPeriod" placeholder="5" value="5">
                            <div class="form-help">–ù–∞ —Å–∫–æ–ª—å–∫–æ –ª–µ—Ç –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—é</div>
                        </div>

                        <button class="btn-primary" onclick="calculateROI()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å ROI</button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h3>
                    </div>
                    <div class="card-body">
                        <div id="results" style="display: none;">
                            <div class="metric-card">
                                <div class="metric-label">–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å</div>
                                <div class="metric-value" id="totalProfit">‚Äî</div>
                            </div>

                            <div class="metric-card">
                                <div class="metric-label">ROI</div>
                                <div class="metric-value" id="roiPercentage">‚Äî</div>
                            </div>

                            <div class="metric-card">
                                <div class="metric-label">–ì–æ–¥–æ–≤–æ–π ROI</div>
                                <div class="metric-value" id="annualRoi">‚Äî</div>
                            </div>

                            <div class="metric-card">
                                <div class="metric-label">–°—Ä–æ–∫ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏</div>
                                <div class="metric-value" id="paybackPeriod">‚Äî</div>
                            </div>

                            <div class="metric-card">
                                <div class="metric-label">–û–±—â–∏–π –¥–æ—Ö–æ–¥ –∑–∞ –ø–µ—Ä–∏–æ–¥</div>
                                <div class="metric-value" id="totalRevenue">‚Äî</div>
                            </div>

                            <div class="metric-card">
                                <div class="metric-label">–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å –≤ –≥–æ–¥</div>
                                <div class="metric-value" id="annualProfit">‚Äî</div>
                            </div>

                            <div id="roiAnalysis" class="explanation-box">
                                <h4>–ê–Ω–∞–ª–∏–∑ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</h4>
                                <div id="roiAnalysisText"></div>
                            </div>
                        </div>

                        <div id="noResults" class="no-results">
                            <div class="no-results-icon">üìà</div>
                            <div class="no-results-text">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –Ω–∞–∂–º–∏—Ç–µ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å ROI"</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../../assets/js/data-manager.js"></script>
    <script src="../../assets/js/app-config.js"></script>
    <script src="../../assets/js/sidebar-logic.js"></script>
    <script>
        if (!localStorage.getItem('user')) {
            window.location.href = '/auth/login.html';
        }

        function calculateROI() {
            // Get input values
            const initialInvestment = parseFloat(document.getElementById('initialInvestment').value) || 0;
            const annualRevenue = parseFloat(document.getElementById('annualRevenue').value) || 0;
            const annualExpenses = parseFloat(document.getElementById('annualExpenses').value) || 0;
            const investmentPeriod = parseFloat(document.getElementById('investmentPeriod').value) || 0;

            // 1. –ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥ –≤ –≥–æ–¥ = –ï–∂–µ–≥–æ–¥–Ω—ã–π –¥–æ—Ö–æ–¥ - –ï–∂–µ–≥–æ–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
            const annualNetIncome = annualRevenue - annualExpenses;
            
            // 2. –û–±—â–∏–π –¥–æ—Ö–æ–¥ –∑–∞ –ø–µ—Ä–∏–æ–¥ = –ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥ –≤ –≥–æ–¥ √ó –°—Ä–æ–∫ (–ª–µ—Ç)
            const totalIncome = annualNetIncome * investmentPeriod;
            
            // 3. –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å = –û–±—â–∏–π –¥–æ—Ö–æ–¥ - –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è
            const netProfit = totalIncome - initialInvestment;
            
            // 4. ROI = (–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å / –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è) √ó 100%
            const roi = initialInvestment > 0 ? (netProfit / initialInvestment) * 100 : 0;
            
            // 5. –ì–æ–¥–æ–≤–æ–π ROI = ROI / –°—Ä–æ–∫ (–ª–µ—Ç)
            const annualRoi = investmentPeriod > 0 ? roi / investmentPeriod : 0;
            
            // 6. –°—Ä–æ–∫ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏ = –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è / –ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥ –≤ –≥–æ–¥ (–≤ –≥–æ–¥–∞—Ö)
            const paybackYears = annualNetIncome > 0 ? initialInvestment / annualNetIncome : 0;

            // Display results
            document.getElementById('results').style.display = 'block';
            document.getElementById('noResults').style.display = 'none';

            document.getElementById('totalProfit').textContent = '‚ÇΩ' + Math.round(netProfit).toLocaleString();
            document.getElementById('roiPercentage').textContent = roi.toFixed(1) + '%';
            document.getElementById('annualRoi').textContent = annualRoi.toFixed(1) + '%';
            document.getElementById('paybackPeriod').textContent = paybackYears.toFixed(1) + ' –ª–µ—Ç';
            document.getElementById('totalRevenue').textContent = '‚ÇΩ' + Math.round(totalIncome).toLocaleString();
            document.getElementById('annualProfit').textContent = '‚ÇΩ' + Math.round(annualNetIncome).toLocaleString();

            // ROI Analysis
            let analysisText = '';
            if (roi > 50) {
                analysisText = '–û—Ç–ª–∏—á–Ω–∞—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è! ROI –≤—ã—à–µ 50% —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤—ã—Å–æ–∫—É—é –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å.';
            } else if (roi > 20) {
                analysisText = '–•–æ—Ä–æ—à–∞—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è! ROI –º–µ–∂–¥—É 20-50% —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∏–µ–º–ª–µ–º—ã–º –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –±–∏–∑–Ω–µ—Å–æ–≤.';
            } else if (roi > 0) {
                analysisText = '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –æ–∫—É–ø–∞–µ—Ç—Å—è, –Ω–æ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ—Ä—ã–Ω–æ—á–Ω–æ–π. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã.';
            } else {
                analysisText = '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –Ω–µ –æ–∫—É–ø–∞–µ—Ç—Å—è. –ü–æ–¥—É–º–∞–π—Ç–µ –æ —Å–Ω–∏–∂–µ–Ω–∏–∏ –∑–∞—Ç—Ä–∞—Ç –∏–ª–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –¥–æ—Ö–æ–¥–∞.';
            }

            if (paybackYears <= 1) {
                analysisText += ' –°—Ä–æ–∫ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏ –º–µ–Ω–µ–µ –≥–æ–¥–∞ - —ç—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å.';
            } else if (paybackYears <= 3) {
                analysisText += ' –°—Ä–æ–∫ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏ 1-3 –≥–æ–¥–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∏–µ–º–ª–µ–º—ã–º –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π.';
            } else {
                analysisText += ' –°—Ä–æ–∫ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏ –±–æ–ª–µ–µ 3 –ª–µ—Ç —Ç—Ä–µ–±—É–µ—Ç —Ç—â–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Ä–∏—Å–∫–æ–≤.';
            }

            document.getElementById('roiAnalysisText').textContent = analysisText;
        }

        // Initialize sidebar
        if (typeof renderSidebar === 'function') {
            renderSidebar();
        }
    </script>
</body>
</html>